{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useCallback}from\"react\";import Spinner from\"./Spinner\";function PopupWithForm(_ref){var formId=_ref.formId,isOpen=_ref.isOpen,title=_ref.title,children=_ref.children,onClose=_ref.onClose,button=_ref.button,onSubmit=_ref.onSubmit,isLoadingPopup=_ref.isLoadingPopup;// console.log();\nvar closeByOverlay=useCallback(function(evt){if(evt.target!==evt.currentTarget)return;onClose();},[onClose]);var handleEscClose=useCallback(function(evt){if(evt.key===\"Escape\"){onClose();}},[onClose]);React.useEffect(function(){if(isOpen){var Popup=document.querySelector(\".\".concat(formId));document.body.addEventListener(\"keyup\",handleEscClose);Popup.addEventListener(\"click\",closeByOverlay);}return function(){var Popup=document.querySelector(\".\".concat(formId));document.body.removeEventListener(\"keyup\",handleEscClose);Popup.removeEventListener(\"click\",closeByOverlay);};},[isOpen,formId,closeByOverlay,handleEscClose]);return/*#__PURE__*/_jsx(\"div\",{className:\"popup \".concat(formId,\" \").concat(isOpen&&\"popup_opened\"),children:/*#__PURE__*/_jsxs(\"form\",{className:\"form popup__container\",name:formId,onSubmit:onSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"popup__title\",children:title}),children,/*#__PURE__*/_jsx(\"button\",{className:\"popup__save\",type:\"submit\",children:button}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__close\",type:\"button\",onClick:function onClick(evt){evt.preventDefault();onClose();}}),isLoadingPopup?/*#__PURE__*/_jsx(Spinner,{}):\"\"]})});}export default PopupWithForm;","map":{"version":3,"sources":["/Users/lara/Documents/обучение/программирование/yaPractik/mesto-react/src/components/PopupWithForm.js"],"names":["React","useCallback","Spinner","PopupWithForm","formId","isOpen","title","children","onClose","button","onSubmit","isLoadingPopup","closeByOverlay","evt","target","currentTarget","handleEscClose","key","useEffect","Popup","document","querySelector","body","addEventListener","removeEventListener","preventDefault"],"mappings":"wFAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,KAAmC,OAAnC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,QAASC,CAAAA,aAAT,MASG,IARDC,CAAAA,MAQC,MARDA,MAQC,CAPDC,MAOC,MAPDA,MAOC,CANDC,KAMC,MANDA,KAMC,CALDC,QAKC,MALDA,QAKC,CAJDC,OAIC,MAJDA,OAIC,CAHDC,MAGC,MAHDA,MAGC,CAFDC,QAEC,MAFDA,QAEC,CADDC,cACC,MADDA,cACC,CACD;AACA,GAAMC,CAAAA,cAAc,CAAGX,WAAW,CAChC,SAACY,GAAD,CAAS,CACP,GAAIA,GAAG,CAACC,MAAJ,GAAeD,GAAG,CAACE,aAAvB,CAAsC,OACtCP,OAAO,GACR,CAJ+B,CAKhC,CAACA,OAAD,CALgC,CAAlC,CAQA,GAAMQ,CAAAA,cAAc,CAAGf,WAAW,CAChC,SAACY,GAAD,CAAS,CACP,GAAIA,GAAG,CAACI,GAAJ,GAAY,QAAhB,CAA0B,CACxBT,OAAO,GACR,CACF,CAL+B,CAMhC,CAACA,OAAD,CANgC,CAAlC,CASAR,KAAK,CAACkB,SAAN,CAAgB,UAAM,CACpB,GAAIb,MAAJ,CAAY,CACV,GAAMc,CAAAA,KAAK,CAAGC,QAAQ,CAACC,aAAT,YAA2BjB,MAA3B,EAAd,CACAgB,QAAQ,CAACE,IAAT,CAAcC,gBAAd,CAA+B,OAA/B,CAAwCP,cAAxC,EACAG,KAAK,CAACI,gBAAN,CAAuB,OAAvB,CAAgCX,cAAhC,EACD,CACD,MAAO,WAAM,CACX,GAAMO,CAAAA,KAAK,CAAGC,QAAQ,CAACC,aAAT,YAA2BjB,MAA3B,EAAd,CACAgB,QAAQ,CAACE,IAAT,CAAcE,mBAAd,CAAkC,OAAlC,CAA2CR,cAA3C,EACAG,KAAK,CAACK,mBAAN,CAA0B,OAA1B,CAAmCZ,cAAnC,EACD,CAJD,CAKD,CAXD,CAWG,CAACP,MAAD,CAASD,MAAT,CAAiBQ,cAAjB,CAAiCI,cAAjC,CAXH,EAaA,mBACE,YAAK,SAAS,iBAAWZ,MAAX,aAAqBC,MAAM,EAAI,cAA/B,CAAd,uBACE,cACE,SAAS,wBADX,CAEE,IAAI,CAAED,MAFR,CAGE,QAAQ,CAAEM,QAHZ,CAIE,UAAU,KAJZ,wBAME,WAAI,SAAS,CAAC,cAAd,UAA8BJ,KAA9B,EANF,CAOGC,QAPH,cAQE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,UACGE,MADH,EARF,cAWE,eACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAE,iBAAUI,GAAV,CAAe,CACtBA,GAAG,CAACY,cAAJ,GACAjB,OAAO,GACR,CANH,EAXF,CAmBGG,cAAc,cAAG,KAAC,OAAD,IAAH,CAAiB,EAnBlC,GADF,EADF,CAyBD,CAED,cAAeR,CAAAA,aAAf","sourcesContent":["import React, { useCallback } from \"react\";\nimport Spinner from \"./Spinner\";\n\nfunction PopupWithForm({\n  formId,\n  isOpen,\n  title,\n  children,\n  onClose,\n  button,\n  onSubmit,\n  isLoadingPopup,\n}) {\n  // console.log();\n  const closeByOverlay = useCallback(\n    (evt) => {\n      if (evt.target !== evt.currentTarget) return;\n      onClose();\n    },\n    [onClose]\n  );\n\n  const handleEscClose = useCallback(\n    (evt) => {\n      if (evt.key === \"Escape\") {\n        onClose();\n      }\n    },\n    [onClose]\n  );\n\n  React.useEffect(() => {\n    if (isOpen) {\n      const Popup = document.querySelector(`.${formId}`);\n      document.body.addEventListener(\"keyup\", handleEscClose);\n      Popup.addEventListener(\"click\", closeByOverlay);\n    }\n    return () => {\n      const Popup = document.querySelector(`.${formId}`);\n      document.body.removeEventListener(\"keyup\", handleEscClose);\n      Popup.removeEventListener(\"click\", closeByOverlay);\n    };\n  }, [isOpen, formId, closeByOverlay, handleEscClose]);\n\n  return (\n    <div className={`popup ${formId} ${isOpen && \"popup_opened\"}`}>\n      <form\n        className={`form popup__container`}\n        name={formId}\n        onSubmit={onSubmit}\n        noValidate\n      >\n        <h2 className=\"popup__title\">{title}</h2>\n        {children}\n        <button className=\"popup__save\" type=\"submit\">\n          {button}\n        </button>\n        <button\n          className=\"popup__close\"\n          type=\"button\"\n          onClick={function (evt) {\n            evt.preventDefault();\n            onClose();\n          }}\n        ></button>\n        {isLoadingPopup ? <Spinner /> : \"\"}\n      </form>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n"]},"metadata":{},"sourceType":"module"}