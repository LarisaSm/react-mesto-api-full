{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useCallback}from'react';function PopupWithForm(_ref){var formId=_ref.formId,isOpen=_ref.isOpen,title=_ref.title,children=_ref.children,onClose=_ref.onClose,button=_ref.button,setConfirmOpen=_ref.setConfirmOpen,confirmAction=_ref.confirmAction,onSubmit=_ref.onSubmit;// console.log();\nvar closeByOverlay=useCallback(function(evt){if(evt.target!==evt.currentTarget)return;onClose();},[onClose]);var handleEscClose=useCallback(function(evt){if(evt.key===\"Escape\"){onClose();}},[onClose]);React.useEffect(function(){if(isOpen){var Popup=document.querySelector(\".\".concat(formId));Popup.classList.add(\"popup_opened\");document.body.addEventListener(\"keyup\",handleEscClose);Popup.addEventListener(\"click\",closeByOverlay);}return function(){var Popup=document.querySelector(\".\".concat(formId));Popup.classList.remove(\"popup_opened\");document.body.removeEventListener(\"keyup\",handleEscClose);Popup.removeEventListener(\"click\",closeByOverlay);};},[isOpen,formId,closeByOverlay,handleEscClose]);function submitConfirm(evt){evt.preventDefault();setConfirmOpen();confirmAction();onClose();// console.log(\"PopupWithForm -> submitConfirm\");\n}return/*#__PURE__*/_jsx(\"div\",{className:\"popup \".concat(formId),children:/*#__PURE__*/_jsxs(\"form\",{className:\"form popup__container\",name:formId,onSubmit:submitConfirm,noValidate:true,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"popup__title\",children:title}),children,/*#__PURE__*/_jsx(\"button\",{className:\"popup__save\",type:\"submit\",children:button}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__close\",type:\"button\",onClick:function onClick(evt){evt.preventDefault();onClose();}})]})});}export default PopupWithForm;","map":{"version":3,"sources":["/Users/lara/Documents/обучение/программирование/yaPractik/mesto-react/src/components/PopupWithForm.js"],"names":["React","useCallback","PopupWithForm","formId","isOpen","title","children","onClose","button","setConfirmOpen","confirmAction","onSubmit","closeByOverlay","evt","target","currentTarget","handleEscClose","key","useEffect","Popup","document","querySelector","classList","add","body","addEventListener","remove","removeEventListener","submitConfirm","preventDefault"],"mappings":"wFAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,KAAmC,OAAnC,CAEA,QAASC,CAAAA,aAAT,MAAqH,IAA5FC,CAAAA,MAA4F,MAA5FA,MAA4F,CAApFC,MAAoF,MAApFA,MAAoF,CAA5EC,KAA4E,MAA5EA,KAA4E,CAArEC,QAAqE,MAArEA,QAAqE,CAA3DC,OAA2D,MAA3DA,OAA2D,CAAlDC,MAAkD,MAAlDA,MAAkD,CAA1CC,cAA0C,MAA1CA,cAA0C,CAA1BC,aAA0B,MAA1BA,aAA0B,CAAXC,QAAW,MAAXA,QAAW,CACnH;AACA,GAAMC,CAAAA,cAAc,CAAGX,WAAW,CAAC,SAACY,GAAD,CAAS,CAC1C,GAAIA,GAAG,CAACC,MAAJ,GAAeD,GAAG,CAACE,aAAvB,CAAsC,OACtCR,OAAO,GACR,CAHiC,CAG/B,CAACA,OAAD,CAH+B,CAAlC,CAKA,GAAMS,CAAAA,cAAc,CAAGf,WAAW,CAAC,SAACY,GAAD,CAAS,CAC1C,GAAIA,GAAG,CAACI,GAAJ,GAAY,QAAhB,CAA0B,CACxBV,OAAO,GACR,CACF,CAJiC,CAI/B,CAACA,OAAD,CAJ+B,CAAlC,CAMAP,KAAK,CAACkB,SAAN,CAAgB,UAAM,CACpB,GAAGd,MAAH,CAAW,CACT,GAAMe,CAAAA,KAAK,CAAGC,QAAQ,CAACC,aAAT,YAA2BlB,MAA3B,EAAd,CACAgB,KAAK,CAACG,SAAN,CAAgBC,GAAhB,CAAoB,cAApB,EACAH,QAAQ,CAACI,IAAT,CAAcC,gBAAd,CAA+B,OAA/B,CAAwCT,cAAxC,EACAG,KAAK,CAACM,gBAAN,CAAuB,OAAvB,CAAgCb,cAAhC,EACD,CACD,MAAO,WAAM,CACX,GAAMO,CAAAA,KAAK,CAAGC,QAAQ,CAACC,aAAT,YAA2BlB,MAA3B,EAAd,CACAgB,KAAK,CAACG,SAAN,CAAgBI,MAAhB,CAAuB,cAAvB,EACAN,QAAQ,CAACI,IAAT,CAAcG,mBAAd,CAAkC,OAAlC,CAA2CX,cAA3C,EACAG,KAAK,CAACQ,mBAAN,CAA0B,OAA1B,CAAmCf,cAAnC,EACD,CALD,CAMD,CAbD,CAaG,CAACR,MAAD,CAASD,MAAT,CAAiBS,cAAjB,CAAiCI,cAAjC,CAbH,EAeA,QAASY,CAAAA,aAAT,CAAwBf,GAAxB,CAA6B,CAC3BA,GAAG,CAACgB,cAAJ,GACApB,cAAc,GACdC,aAAa,GACbH,OAAO,GACP;AACD,CAED,mBACE,YAAK,SAAS,iBAAWJ,MAAX,CAAd,uBACA,cAAM,SAAS,wBAAf,CAA0C,IAAI,CAAEA,MAAhD,CAAwD,QAAQ,CAAEyB,aAAlE,CAAiF,UAAU,KAA3F,wBACE,WAAI,SAAS,CAAC,cAAd,UAA8BvB,KAA9B,EADF,CAEGC,QAFH,cAGE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,UAAgDE,MAAhD,EAHF,cAIE,eAAQ,SAAS,CAAC,cAAlB,CAAiC,IAAI,CAAC,QAAtC,CAA+C,OAAO,CAAE,iBAAUK,GAAV,CAAe,CAAEA,GAAG,CAACgB,cAAJ,GAAsBtB,OAAO,GAAG,CAAzG,EAJF,GADA,EADF,CAUD,CAED,cAAeL,CAAAA,aAAf","sourcesContent":["import React, { useCallback } from 'react';\n\nfunction PopupWithForm ({formId, isOpen, title, children, onClose, button, setConfirmOpen, confirmAction, onSubmit}) {\n  // console.log();\n  const closeByOverlay = useCallback((evt) => {\n    if (evt.target !== evt.currentTarget) return;\n    onClose();\n  }, [onClose])\n\n  const handleEscClose = useCallback((evt) => {\n    if (evt.key === \"Escape\") {\n      onClose();\n    }\n  }, [onClose])\n\n  React.useEffect(() => {\n    if(isOpen) {\n      const Popup = document.querySelector(`.${formId}`);\n      Popup.classList.add(\"popup_opened\");\n      document.body.addEventListener(\"keyup\", handleEscClose);\n      Popup.addEventListener(\"click\", closeByOverlay);\n    }\n    return () => {\n      const Popup = document.querySelector(`.${formId}`);\n      Popup.classList.remove(\"popup_opened\");\n      document.body.removeEventListener(\"keyup\", handleEscClose);\n      Popup.removeEventListener(\"click\", closeByOverlay);\n    };\n  }, [isOpen, formId, closeByOverlay, handleEscClose]); \n\n  function submitConfirm (evt) {\n    evt.preventDefault(); \n    setConfirmOpen();\n    confirmAction();\n    onClose();\n    // console.log(\"PopupWithForm -> submitConfirm\");\n  }\n\n  return (\n    <div className={`popup ${formId}`}>\n    <form className={`form popup__container`} name={formId} onSubmit={submitConfirm} noValidate>\n      <h2 className=\"popup__title\">{title}</h2>\n      {children}\n      <button className=\"popup__save\" type=\"submit\" >{button}</button>\n      <button className=\"popup__close\" type=\"button\" onClick={function (evt) { evt.preventDefault(); onClose()}}></button>\n    </form>\n  </div>\n  )\n}\n\nexport default PopupWithForm;"]},"metadata":{},"sourceType":"module"}