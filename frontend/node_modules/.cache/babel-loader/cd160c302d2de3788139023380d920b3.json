{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/lara/Documents/\\u043E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435/\\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435/yaPractik/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React from'react';import Api from'../utils/api';import Spinner from'./Spinner';import CurrentUserContext from'../contexts/CurrentUserContext';function Confirm(_ref){var isOpen=_ref.isOpen,setIsOpen=_ref.setIsOpen,confirmAction=_ref.confirmAction,confirmObj=_ref.confirmObj,setСurrentUser=_ref.setСurrentUser,cards=_ref.cards,setCards=_ref.setCards,isLoadingConfirm=_ref.isLoadingConfirm,setIsLoadingConfirm=_ref.setIsLoadingConfirm;var currentUser=React.useContext(CurrentUserContext);React.useEffect(function(){if(isOpen){var Popup=document.querySelector(\".confirm\");Popup.classList.add(\"popup_opened\");}return function(){var Popup=document.querySelector(\".confirm\");Popup.classList.remove(\"popup_opened\");};},[isOpen]);function onClick(){// console.log(\"confirm -> onClick\");\n// console.log(confirmAction);\nsetIsLoadingConfirm(true);switch(confirmAction){case'addNewCard':Api.addNewCard(confirmObj.name,confirmObj.link).then(function(newCard){newCard.key=newCard._id;newCard.like=newCard.likes;newCard.ownerId=newCard.owner._id;newCard.src=newCard.link;newCard.nameImg=newCard.name;newCard.cardId=newCard._id;setCards([newCard].concat(_toConsumableArray(cards)));}).then(function(){setIsOpen(false);}).catch(function(err){console.log(err);// выведем ошибку в консоль\n});break;case'cardDelete':var isOwn=confirmObj.ownerId===currentUser._id;if(isOwn){Api.deleteCard(confirmObj.cardId).then(function(){var newCards=cards.filter(function(c){return c.cardId!==confirmObj.cardId;});setCards(newCards);}).then(function(){setIsOpen(false);}).catch(function(err){console.log(err);// выведем ошибку в консоль\n});}break;case'editUserAvatar':Api.setUserAvatar(confirmObj.avatar).then(function(res){return setСurrentUser(res);}).then(function(){setIsOpen(false);}).catch(function(err){console.log(err);// выведем ошибку в консоль\n});break;case'editUserInfo':Api.editUserInfo(confirmObj.name,confirmObj.about).then(function(res){return setСurrentUser(res);}).then(function(){setIsOpen(false);}).catch(function(err){console.log(err);// выведем ошибку в консоль\n});break;default:break;}// console.log(\"Confirm -> onCLick\");\n}return/*#__PURE__*/_jsx(\"div\",{className:\"confirm popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup__container confirm__container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"popup__header\",children:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__save\",type:\"button\",onClick:onClick,children:\"\\u0414\\u0430\"}),isLoadingConfirm?/*#__PURE__*/_jsx(Spinner,{}):'',/*#__PURE__*/_jsx(\"button\",{className:\"popup__close\",type:\"button\",onClick:function onClick(evt){evt.preventDefault();setIsOpen(false);}})]})});}export default Confirm;","map":{"version":3,"sources":["/Users/lara/Documents/обучение/программирование/yaPractik/mesto-react/src/components/Confirm.js"],"names":["React","Api","Spinner","CurrentUserContext","Confirm","isOpen","setIsOpen","confirmAction","confirmObj","setСurrentUser","cards","setCards","isLoadingConfirm","setIsLoadingConfirm","currentUser","useContext","useEffect","Popup","document","querySelector","classList","add","remove","onClick","addNewCard","name","link","then","newCard","key","_id","like","likes","ownerId","owner","src","nameImg","cardId","catch","err","console","log","isOwn","deleteCard","newCards","filter","c","setUserAvatar","avatar","res","editUserInfo","about","evt","preventDefault"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Api from '../utils/api';\nimport Spinner from './Spinner';\n\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nfunction Confirm ({isOpen, setIsOpen,confirmAction, confirmObj, setСurrentUser, cards, setCards, isLoadingConfirm, setIsLoadingConfirm}) {\n  \n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    if(isOpen) {\n      const Popup = document.querySelector(`.confirm`);\n      Popup.classList.add(\"popup_opened\");\n    }\n    return () => {\n      const Popup = document.querySelector(`.confirm`);\n      Popup.classList.remove(\"popup_opened\");\n    };\n  }, [isOpen]); \n\n  function onClick () {\n    // console.log(\"confirm -> onClick\");\n    // console.log(confirmAction);\n    setIsLoadingConfirm(true);\n    switch  (confirmAction) {\n      case 'addNewCard': \n        Api.addNewCard(confirmObj.name, confirmObj.link)\n        .then((newCard) => {\n          newCard.key = newCard._id;\n          newCard.like = newCard.likes;\n          newCard.ownerId = newCard.owner._id;\n          newCard.src = newCard.link;\n          newCard.nameImg = newCard.name;\n          newCard.cardId = newCard._id;\n          setCards([newCard, ...cards]); \n        })\n        .then(() => {setIsOpen(false)})\n        .catch((err) => {\n          console.log(err); // выведем ошибку в консоль\n        }); \n        break;\n      case 'cardDelete':\n        const isOwn = confirmObj.ownerId === currentUser._id;\n        if(isOwn) {\n            Api.deleteCard(confirmObj.cardId)\n            .then(() => {\n                const newCards = cards.filter((c) => c.cardId !== confirmObj.cardId);\n              setCards(newCards);\n            })\n            .then(() => {setIsOpen(false)})\n            .catch((err) => {\n              console.log(err); // выведем ошибку в консоль\n            });}\n        break;\n      case 'editUserAvatar':\n        Api.setUserAvatar(confirmObj.avatar)\n        .then((res) => setСurrentUser(res))\n        .then(() => {setIsOpen(false)})\n        .catch((err) => {\n          console.log(err); // выведем ошибку в консоль\n        });\n          break;\n      case 'editUserInfo':\n        Api.editUserInfo (confirmObj.name, confirmObj.about)\n        .then((res) => setСurrentUser(res))\n        .then(() => {setIsOpen(false)})\n        .catch((err) => {\n          console.log(err); // выведем ошибку в консоль\n        });\n        break;\n      default:\n        break;\n\n    } \n    // console.log(\"Confirm -> onCLick\");\n  }\n\n  return (\n    <div className=\"confirm popup\">\n    <div className=\"popup__container confirm__container\">\n      <h2 className=\"popup__header\">Вы уверены?</h2>\n      \n      <button className=\"popup__save\" type=\"button\" onClick={onClick}>Да</button>\n      {isLoadingConfirm ? <Spinner /> : ''}\n      <button className=\"popup__close\" type=\"button\" onClick={function (evt) { evt.preventDefault(); setIsOpen(false)}}></button>\n    \n    </div>\n  </div>\n  )\n}\n\nexport default Confirm; "]},"metadata":{},"sourceType":"module"}