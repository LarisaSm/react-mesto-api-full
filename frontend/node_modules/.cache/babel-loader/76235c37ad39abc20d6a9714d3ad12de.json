{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/lara/Documents/\\u043E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435/\\u043F\\u0440\\u043E\\u0433\\u0440\\u0430\\u043C\\u043C\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435/yaPractik/mesto-react/src/Components/PopupWithForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction PopupWithForm({\n  formId,\n  isOpen,\n  title,\n  children,\n  onClose,\n  button,\n  setConfirmOpen,\n  isConfirm,\n  confirmAction,\n  setIsConfirm,\n  confirmClose,\n  action,\n  confirmAction123\n}) {\n  _s();\n\n  const currentUser = React.useContext(CurrentUserContext);\n  const closeByOverlay = useCallback(evt => {\n    if (evt.target !== evt.currentTarget) return;\n    onClose();\n  }, [onClose]);\n  const handleEscClose = useCallback(evt => {\n    if (evt.key === \"Escape\") {\n      onClose();\n    }\n  }, [onClose]);\n  React.useEffect(() => {\n    if (isOpen) {\n      const Popup = document.querySelector(`.${formId}`);\n      Popup.classList.add(\"popup_opened\");\n      document.body.addEventListener(\"keyup\", handleEscClose);\n      Popup.addEventListener(\"click\", closeByOverlay);\n    }\n\n    return () => {\n      const Popup = document.querySelector(`.${formId}`);\n      Popup.classList.remove(\"popup_opened\");\n      document.body.removeEventListener(\"keyup\", handleEscClose);\n      Popup.removeEventListener(\"click\", closeByOverlay);\n    };\n  }, [isOpen, formId, closeByOverlay, handleEscClose]);\n\n  function submitConfirm(evt) {\n    evt.preventDefault();\n    setConfirmOpen(); // setConfirmAction(() => {\n    //   console.log(\"ERT\");\n    // })\n\n    onClose();\n    confirmAction123(action);\n  } // React.useEffect(() => {\n  //   if(isConfirm) {\n  //     console.log(\"isConfirm!!!!!!\");\n  //     console.log()\n  //     confirmAction();\n  //     setIsConfirm();\n  //     console.log(isConfirm);\n  //     confirmClose();\n  //   }\n  //   return () => {\n  //   };\n  // }, [isConfirm, confirmAction]); \n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `popup ${formId}`,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: `form popup__container`,\n      name: formId,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"popup__title\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this), children, /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"popup__save\",\n        type: \"submit\",\n        onClick: e => {\n          submitConfirm(e);\n        },\n        children: button\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"popup__close\",\n        type: \"button\",\n        onClick: function (evt) {\n          evt.preventDefault();\n          onClose();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PopupWithForm, \"V+sW+RadwIHeLPmUSZOMZ1t+WDA=\");\n\n_c = PopupWithForm;\nexport default PopupWithForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PopupWithForm\");","map":{"version":3,"sources":["/Users/lara/Documents/обучение/программирование/yaPractik/mesto-react/src/Components/PopupWithForm.js"],"names":["React","useCallback","CurrentUserContext","PopupWithForm","formId","isOpen","title","children","onClose","button","setConfirmOpen","isConfirm","confirmAction","setIsConfirm","confirmClose","action","confirmAction123","currentUser","useContext","closeByOverlay","evt","target","currentTarget","handleEscClose","key","useEffect","Popup","document","querySelector","classList","add","body","addEventListener","remove","removeEventListener","submitConfirm","preventDefault","e"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AACA,OAAOC,kBAAP,MAA+B,gCAA/B;;AAIA,SAASC,aAAT,CAAwB;AAACC,EAAAA,MAAD;AAASC,EAAAA,MAAT;AAAiBC,EAAAA,KAAjB;AAAwBC,EAAAA,QAAxB;AAAkCC,EAAAA,OAAlC;AAA2CC,EAAAA,MAA3C;AAAmDC,EAAAA,cAAnD;AAAmEC,EAAAA,SAAnE;AAA8EC,EAAAA,aAA9E;AAA4FC,EAAAA,YAA5F;AAA0GC,EAAAA,YAA1G;AAAwHC,EAAAA,MAAxH;AAA+HC,EAAAA;AAA/H,CAAxB,EAA0K;AAAA;;AAExK,QAAMC,WAAW,GAAGjB,KAAK,CAACkB,UAAN,CAAiBhB,kBAAjB,CAApB;AAIA,QAAMiB,cAAc,GAAGlB,WAAW,CAAEmB,GAAD,IAAS;AAC1C,QAAIA,GAAG,CAACC,MAAJ,KAAeD,GAAG,CAACE,aAAvB,EAAsC;AACtCd,IAAAA,OAAO;AACR,GAHiC,EAG/B,CAACA,OAAD,CAH+B,CAAlC;AAKA,QAAMe,cAAc,GAAGtB,WAAW,CAAEmB,GAAD,IAAS;AAC1C,QAAIA,GAAG,CAACI,GAAJ,KAAY,QAAhB,EAA0B;AACxBhB,MAAAA,OAAO;AACR;AACF,GAJiC,EAI/B,CAACA,OAAD,CAJ+B,CAAlC;AAMAR,EAAAA,KAAK,CAACyB,SAAN,CAAgB,MAAM;AACpB,QAAGpB,MAAH,EAAW;AACT,YAAMqB,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAwB,IAAGxB,MAAO,EAAlC,CAAd;AACAsB,MAAAA,KAAK,CAACG,SAAN,CAAgBC,GAAhB,CAAoB,cAApB;AACAH,MAAAA,QAAQ,CAACI,IAAT,CAAcC,gBAAd,CAA+B,OAA/B,EAAwCT,cAAxC;AACAG,MAAAA,KAAK,CAACM,gBAAN,CAAuB,OAAvB,EAAgCb,cAAhC;AACD;;AACD,WAAO,MAAM;AACX,YAAMO,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAwB,IAAGxB,MAAO,EAAlC,CAAd;AACAsB,MAAAA,KAAK,CAACG,SAAN,CAAgBI,MAAhB,CAAuB,cAAvB;AACAN,MAAAA,QAAQ,CAACI,IAAT,CAAcG,mBAAd,CAAkC,OAAlC,EAA2CX,cAA3C;AACAG,MAAAA,KAAK,CAACQ,mBAAN,CAA0B,OAA1B,EAAmCf,cAAnC;AACD,KALD;AAMD,GAbD,EAaG,CAACd,MAAD,EAASD,MAAT,EAAiBe,cAAjB,EAAiCI,cAAjC,CAbH;;AAeA,WAASY,aAAT,CAAwBf,GAAxB,EAA6B;AAC3BA,IAAAA,GAAG,CAACgB,cAAJ;AACA1B,IAAAA,cAAc,GAFa,CAG3B;AACA;AACA;;AACAF,IAAAA,OAAO;AACPQ,IAAAA,gBAAgB,CAACD,MAAD,CAAhB;AAED,GAzCuK,CA0CxK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAEA,sBACE;AAAK,IAAA,SAAS,EAAG,SAAQX,MAAO,EAAhC;AAAA,2BACA;AAAM,MAAA,SAAS,EAAG,uBAAlB;AAA0C,MAAA,IAAI,EAAEA,MAAhD;AAAwD,MAAA,UAAU,MAAlE;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,cAAd;AAAA,kBAA8BE;AAA9B;AAAA;AAAA;AAAA;AAAA,cADF,EAEGC,QAFH,eAGE;AAAQ,QAAA,SAAS,EAAC,aAAlB;AAAgC,QAAA,IAAI,EAAC,QAArC;AAA8C,QAAA,OAAO,EAAG8B,CAAD,IAAO;AAACF,UAAAA,aAAa,CAACE,CAAD,CAAb;AAAiB,SAAhF;AAAA,kBAAmF5B;AAAnF;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE;AAAQ,QAAA,SAAS,EAAC,cAAlB;AAAiC,QAAA,IAAI,EAAC,QAAtC;AAA+C,QAAA,OAAO,EAAE,UAAUW,GAAV,EAAe;AAAEA,UAAAA,GAAG,CAACgB,cAAJ;AAAsB5B,UAAAA,OAAO;AAAG;AAAzG;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADF;AAUD;;GAlEQL,a;;KAAAA,a;AAoET,eAAeA,aAAf","sourcesContent":["import React, { useCallback } from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\n\n\nfunction PopupWithForm ({formId, isOpen, title, children, onClose, button, setConfirmOpen, isConfirm, confirmAction,setIsConfirm, confirmClose, action,confirmAction123}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n\n\n  const closeByOverlay = useCallback((evt) => {\n    if (evt.target !== evt.currentTarget) return;\n    onClose();\n  }, [onClose])\n\n  const handleEscClose = useCallback((evt) => {\n    if (evt.key === \"Escape\") {\n      onClose();\n    }\n  }, [onClose])\n\n  React.useEffect(() => {\n    if(isOpen) {\n      const Popup = document.querySelector(`.${formId}`);\n      Popup.classList.add(\"popup_opened\");\n      document.body.addEventListener(\"keyup\", handleEscClose);\n      Popup.addEventListener(\"click\", closeByOverlay);\n    }\n    return () => {\n      const Popup = document.querySelector(`.${formId}`);\n      Popup.classList.remove(\"popup_opened\");\n      document.body.removeEventListener(\"keyup\", handleEscClose);\n      Popup.removeEventListener(\"click\", closeByOverlay);\n    };\n  }, [isOpen, formId, closeByOverlay, handleEscClose]); \n\n  function submitConfirm (evt) {\n    evt.preventDefault(); \n    setConfirmOpen(); \n    // setConfirmAction(() => {\n    //   console.log(\"ERT\");\n    // })\n    onClose();\n    confirmAction123(action);\n\n  }\n  // React.useEffect(() => {\n  //   if(isConfirm) {\n  //     console.log(\"isConfirm!!!!!!\");\n  //     console.log()\n  //     confirmAction();\n  //     setIsConfirm();\n  //     console.log(isConfirm);\n  //     confirmClose();\n  //   }\n  //   return () => {\n      \n  //   };\n  // }, [isConfirm, confirmAction]); \n\n  return (\n    <div className={`popup ${formId}`}>\n    <form className={`form popup__container`} name={formId} noValidate>\n      <h2 className=\"popup__title\">{title}</h2>\n      {children}\n      <button className=\"popup__save\" type=\"submit\" onClick={(e) => {submitConfirm(e)}}>{button}</button>\n      <button className=\"popup__close\" type=\"button\" onClick={function (evt) { evt.preventDefault(); onClose()}}></button>\n    </form>\n  </div>\n  )\n}\n\nexport default PopupWithForm;"]},"metadata":{},"sourceType":"module"}