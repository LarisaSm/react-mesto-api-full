(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),c=n.n(o),i=n(18),s=n.n(i),r=(n(28),n(20)),u=n(2);var l=function(e){var t=e.card,n=e.isOpen,i=e.onClose,s=t.src,r=t.nameImg,u=Object(o.useCallback)((function(e){e.target===e.currentTarget&&i()}),[i]),l=Object(o.useCallback)((function(e){"Escape"===e.key&&i()}),[i]);return c.a.useEffect((function(){if(n){var e=document.querySelector(".image");e.classList.add("popup_opened"),document.body.addEventListener("keyup",l),e.addEventListener("click",u)}return function(){var e=document.querySelector(".image");e.classList.remove("popup_opened"),document.body.removeEventListener("keyup",l),e.removeEventListener("click",u)}}),[n,u,l]),Object(a.jsx)("div",{className:"popup image",children:Object(a.jsxs)("div",{className:"popup__container image__container",children:[Object(a.jsx)("img",{src:s,alt:r,className:"popup__image"}),Object(a.jsx)("p",{className:"popup__figcaption-image",children:r}),Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:i})]})})};n(29);var p=function(){return Object(a.jsx)("div",{className:"Spinner"})};var d=function(e){var t=e.isOpen,n=e.setIsOpen,o=e.confirmAction,c=e.isLoadingConfirm,i=e.setIsLoadingConfirm,s=e.cardDelete;return Object(a.jsx)("div",{className:"confirm popup ".concat(t&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container confirm__container",children:[Object(a.jsx)("h2",{className:"popup__header",children:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?"}),Object(a.jsx)("button",{className:"popup__save",type:"button",onClick:function(){switch(i(!0),o){case"cardDelete":s()}},children:"\u0414\u0430"}),c?Object(a.jsx)(p,{}):"",Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:function(e){e.preventDefault(),n(!1)}})]})})},m="https://api.15dev.students.nomoredomains.icu/";function j(e){return fetch(m+"cards",{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return b(e)}))}function f(e){return fetch(m+"users/me",{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return b(e)}))}function b(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}var h=function(e){var t=e.button,n=e.title,o=e.formId,c=e.children,i=e.onSubmit;return Object(a.jsx)("div",{className:"auth",children:Object(a.jsxs)("form",{className:"form ".concat(o),name:"auth__form",onSubmit:i,noValidate:!0,children:[Object(a.jsx)("h2",{className:"auth__title",children:n}),c,Object(a.jsx)("button",{className:"auth__save",type:"submit",children:t})]})})},g=n(3);var O=Object(g.i)((function(e){var t=e.onLogin,n=c.a.useState(""),o=Object(u.a)(n,2),i=o[0],s=o[1],r=c.a.useState(""),l=Object(u.a)(r,2),p=l[0],d=l[1];return Object(a.jsxs)(h,{button:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0445\u043e\u0434",formId:"auth",onSubmit:function(e){return function(e){e.preventDefault(),t(i,p),s(""),d("")}(e)},children:[Object(a.jsx)("input",{id:"email-input",type:"email",className:"auth__input",autoComplete:"off",placeholder:"Email",name:"email",value:i,onChange:function(e){s(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"email-input-error",className:"auth__input-error"}),Object(a.jsx)("input",{id:"pass-input",type:"password",className:"auth__input",autoComplete:"new-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"pass",value:p,minLength:"2",maxLength:"200",required:!0,onChange:function(e){d(e.target.value)}}),Object(a.jsx)("span",{id:"pass-input-error",className:"auth__input-error"})]})})),x=n(7);var v=Object(g.i)((function(e){var t=e.onRegister,n=c.a.useState(""),o=Object(u.a)(n,2),i=o[0],s=o[1],r=c.a.useState(""),l=Object(u.a)(r,2),p=l[0],d=l[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(h,{button:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",formId:"auth",onSubmit:function(e){return function(e){e.preventDefault(),t(p,i)}(e)},children:[Object(a.jsx)("input",{id:"email-input",type:"email",className:"auth__input",autoComplete:"off",placeholder:"Email",name:"email",value:i,onChange:function(e){s(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"email-input-error",className:"auth__input-error"}),Object(a.jsx)("input",{id:"pass-input",type:"password",className:"auth__input",autoComplete:"new-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"pass",value:p,minLength:"2",maxLength:"200",required:!0,onChange:function(e){d(e.target.value)}}),Object(a.jsx)("span",{id:"pass-input-error",className:"auth-error"})]}),Object(a.jsxs)("p",{className:"auth__register-text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(a.jsx)(x.b,{className:"auth__register-link",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})),C=n(21),A=n(22),_=function(e){var t=e.component,n=Object(A.a)(e,["component"]);return Object(a.jsx)(g.b,{exact:!0,children:function(){return n.loggedIn?Object(a.jsx)(t,Object(C.a)({},n)):Object(a.jsx)(g.a,{to:"/sign-in"})}})};var N=function(){return Object(a.jsxs)("div",{className:"not-found",children:[Object(a.jsxs)("h3",{className:"not-found__title",children:[Object(a.jsx)("span",{children:"404"})," - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]}),Object(a.jsx)("img",{className:"not-found__image",alt:""}),Object(a.jsx)("p",{className:"not-found__text",children:"\u041e\u0439, \u0437\u0434\u0435\u0441\u044c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442"}),Object(a.jsx)(x.b,{className:"button button_type_to-main",to:"/",children:"\u041d\u0430\u0437\u0430\u0434"})]})},y="https://api.15dev.students.nomoredomains.icu";function k(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}var I=function(e){var t=e.isOpen,n=e.onClose,o=e.isConfirmAuth;return Object(a.jsx)("div",{className:"infoToolTip ".concat(t&&"infoToolTip_opened"),children:Object(a.jsxs)("div",{className:"infoToolTip__container",children:[Object(a.jsx)("img",{className:"infoToolTip__img",src:o?"data:image/png;base64,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":"data:image/png;base64,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",alt:""}),Object(a.jsx)("h2",{className:"infoToolTip__text",children:o?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}),Object(a.jsx)("button",{className:"infoToolTip__close",type:"button",onClick:function(e){e.preventDefault(),n()}})]})})},L=n.p+"static/media/header__logo.a307e1c4.svg";var S=function(e){var t=e.loggedIn,n=e.userData,o=e.signOut,c=Object(g.h)();return Object(a.jsxs)("header",{className:"header page__header",children:[Object(a.jsx)("img",{src:L,alt:"\u041c\u0435\u0441\u0442\u043e",className:"header__logo"}),function(e){switch(e){case"/sign-in":return Object(a.jsx)(x.b,{to:"sign-up",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"});case"/sign-up":return Object(a.jsx)(x.b,{to:"sign-in",className:"header__link",children:"\u0412\u043e\u0439\u0442\u0438"});case"/":return t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{className:"header__user",children:n.email}),Object(a.jsx)("button",{onClick:o,className:"header__link header__link_signout",children:"\u0412\u044b\u0439\u0442\u0438"})]});default:return}}(c.pathname)]})};var w=function(){return Object(a.jsx)("footer",{className:"footer page__footer",children:"\xa9 2020 Mesto Russia"})},E=c.a.createContext();var W=function(e){var t=e.cardId,n=e.src,o=e.nameImg,i=e.like,s=e.onCardClick,r=e.onCardLike,u=e.onCardDelete,l=e.ownerId,p=e.setConfirmOpen,d=c.a.useContext(E),m=l===d._id,j="element__trash ".concat(m?" ":"element__trash_invisible"),f=i.some((function(e){return e===d._id})),b="element__like ".concat(f?"element__like_type_active":" ");return Object(a.jsxs)("div",{className:"element",children:[Object(a.jsx)("img",{src:n,alt:o,className:"element__img",onClick:function(){s({src:n,nameImg:o})}}),Object(a.jsxs)("div",{className:"element__name",children:[Object(a.jsx)("h3",{className:"element__title",children:o}),Object(a.jsxs)("div",{className:"element__likes",children:[Object(a.jsx)("button",{className:b,type:"button",onClick:function(){r(i,t)}}),Object(a.jsx)("p",{className:"element__like-counter",children:i.length})]})]}),Object(a.jsx)("button",{className:j,type:"button",onClick:function(){p(!0),u({ownerId:l,cardId:t})}})]})};var X=function(e){var t=e.cards,n=e.onCardLike,o=e.onEditProfile,i=e.onAddPlace,s=e.onEditAvatar,r=e.onCardClick,u=e.setConfirmOpen,l=e.isLoading,d=e.onCardDelete,m=c.a.useContext(E);return Object(a.jsxs)("main",{className:"main page__main",children:[Object(a.jsxs)("section",{className:"profile main__profile",children:[Object(a.jsx)("a",{href:"/#",className:"profile__avatar-edit",onClick:s,children:Object(a.jsx)("img",{src:m.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"})}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__name",children:[Object(a.jsx)("p",{className:"profile__name-title",children:m.name}),Object(a.jsx)("button",{className:"profile__button profile__button_type_edit",type:"button",onClick:o})]}),Object(a.jsx)("p",{className:"profile__about",children:m.about})]}),Object(a.jsx)("button",{className:"profile__button profile__button_type_add ",type:"button",onClick:i})]}),Object(a.jsx)("section",{className:"elements main__elements",children:l?Object(a.jsx)(p,{}):t.map((function(e){var t=e.cardId,o=e.src,c=e.nameImg,i=e.like,s=e.ownerId;return Object(a.jsx)(W,{ownerId:s,src:o,nameImg:c,like:i,cardId:t,onCardClick:r,onCardLike:n,onCardDelete:d,setConfirmOpen:u},t)}))})]})};var P=function(e){var t=e.formId,n=e.isOpen,i=e.title,s=e.children,r=e.onClose,u=e.button,l=e.onSubmit,d=e.isLoadingPopup,m=Object(o.useCallback)((function(e){e.target===e.currentTarget&&r()}),[r]),j=Object(o.useCallback)((function(e){"Escape"===e.key&&r()}),[r]);return c.a.useEffect((function(){if(n){var e=document.querySelector(".".concat(t));document.body.addEventListener("keyup",j),e.addEventListener("click",m)}return function(){var e=document.querySelector(".".concat(t));document.body.removeEventListener("keyup",j),e.removeEventListener("click",m)}}),[n,t,m,j]),Object(a.jsx)("div",{className:"popup ".concat(t," ").concat(n&&"popup_opened"),children:Object(a.jsxs)("form",{className:"form popup__container",name:t,onSubmit:l,noValidate:!0,children:[Object(a.jsx)("h2",{className:"popup__title",children:i}),s,Object(a.jsx)("button",{className:"popup__save",type:"submit",children:u}),Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:function(e){e.preventDefault(),r()}}),d?Object(a.jsx)(p,{}):""]})})};var T=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateUser,i=e.isLoadingPopup,s=c.a.useState(""),r=Object(u.a)(s,2),l=r[0],p=r[1],d=c.a.useState(""),m=Object(u.a)(d,2),j=m[0],f=m[1],b=c.a.useContext(E);return c.a.useEffect((function(){p(b.about),f(b.name)}),[b]),Object(a.jsxs)(P,{button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",formId:"edit-user",isOpen:t,onClose:n,onSubmit:function(e){return function(e){e.preventDefault(),o(j,l)}(e)},isLoadingPopup:i,children:[Object(a.jsx)("input",{id:"name-input",type:"text",className:"popup__input popup__input_type_name",autoComplete:"off",placeholder:"\u0418\u043c\u044f",name:"name",minLength:"2",maxLength:"40",value:j,onChange:function(e){f(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__input-error"}),Object(a.jsx)("input",{id:"about-input",type:"text",className:"popup__input popup__input_type_about",autoComplete:"off",placeholder:"\u041e \u0441\u0435\u0431\u0435",name:"about",value:l,minLength:"2",maxLength:"200",required:!0,onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{id:"about-input-error",className:"popup__input-error"})]})};var V=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,i=e.isLoadingPopup,s=c.a.useRef();return Object(a.jsxs)(P,{button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",formId:"edit-user-avatar",isOpen:t,onClose:n,onSubmit:function(e){return function(e){e.preventDefault(),o({avatar:s.current.value})}(e)},isLoadingPopup:i,children:[Object(a.jsx)("input",{id:"avatar-input",type:"url",className:"popup__input popup__input_type_name",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",name:"name",ref:s,minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("span",{id:"avatar-input-error",className:"popup__input-error"})]})};var K=function(e){var t=e.isOpen,n=e.onClose,o=e.onAddPlace,i=e.isLoadingPopup,s=c.a.useState(""),r=Object(u.a)(s,2),l=r[0],p=r[1],d=c.a.useState(""),m=Object(u.a)(d,2),j=m[0],f=m[1];return Object(a.jsxs)(P,{button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",formId:"add-card",isOpen:t,onClose:n,onSubmit:function(e){return function(e){e.preventDefault(),o({name:l,link:j})}(e)},isLoadingPopup:i,children:[Object(a.jsx)("input",{id:"name-input",type:"text",className:"popup__input popup__input_type_name",autoComplete:"off",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",value:l,onChange:function(e){p(e.target.value)},minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__input-error"}),Object(a.jsx)("input",{id:"url-input",type:"url",className:"popup__input popup__input_type_about",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:j,onChange:function(e){f(e.target.value)},name:"link",required:!0}),Object(a.jsx)("span",{id:"url-input-error",className:"popup__input-error"})]})};var Z=function(){var e=c.a.useState(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],i=c.a.useState(!1),s=Object(u.a)(i,2),p=s[0],h=s[1],x=c.a.useState(!1),C=Object(u.a)(x,2),A=C[0],L=C[1],W=c.a.useState(!1),P=Object(u.a)(W,2),Z=P[0],F=P[1],D=c.a.useState(!1),B=Object(u.a)(D,2),Y=B[0],R=B[1],Q=c.a.useState(!1),H=Object(u.a)(Q,2),M=H[0],q=H[1],U=c.a.useState(!1),G=Object(u.a)(U,2),z=G[0],J=G[1],$=c.a.useState([]),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=c.a.useState(!1),oe=Object(u.a)(ae,2),ce=oe[0],ie=oe[1],se=c.a.useState({src:"",nameImg:""}),re=Object(u.a)(se,2),ue=re[0],le=re[1],pe=c.a.useState(!1),de=Object(u.a)(pe,2),me=de[0],je=de[1],fe=c.a.useState(!1),be=Object(u.a)(fe,2),he=be[0],ge=be[1],Oe=c.a.useState({name:"",about:"",email:"",token:""}),xe=Object(u.a)(Oe,2),ve=xe[0],Ce=xe[1],Ae=c.a.useState(),_e=Object(u.a)(Ae,2),Ne=_e[0],ye=_e[1],ke=c.a.useState({ownerId:"",cardId:""}),Ie=Object(u.a)(ke,2),Le=Ie[0],Se=Ie[1],we=c.a.useState({}),Ee=Object(u.a)(we,2),We=Ee[0],Xe=Ee[1],Pe=Object(g.g)(),Te=c.a.useState(!1),Ve=Object(u.a)(Te,2),Ke=Ve[0],Ze=Ve[1];function Fe(){o(!1),h(!1),L(!1),F(!1),q(!1),le([]),ge(!1),Se({ownerId:"",cardId:""})}function De(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(y,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(e)}}).then((function(e){return k(e)})).then((function(e){return e}))).then((function(e){e&&(Ze(!0),Ce({email:e.email}),ye(t),Pe.push("/"))})).catch((function(e){console.log(e)}))}return c.a.useEffect((function(){f(Ne).then((function(e){Ce(e)})).catch((function(e){console.log(e)}))}),[Ne]),c.a.useEffect((function(){j(Ne).then((function(e){ne(e.map((function(e){return{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}}))),ie(!1)})).catch((function(e){console.log(e)}))}),[Ne]),c.a.useEffect((function(){ie(!0),De(),j(Ne).then((function(e){ne(e.map((function(e){return{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}}))),ie(!1)})).catch((function(e){console.log(e)}))}),[]),c.a.useEffect((function(){f(Ne).then((function(e){Ce(e)})).catch((function(e){console.log(e)}))}),[Ne]),c.a.useEffect((function(){j(Ne).then((function(e){ne(e.map((function(e){return{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}}))),ie(!1)})).catch((function(e){console.log(e)}))}),[Ne]),Object(a.jsx)(E.Provider,{value:ve,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(S,{loggedIn:Ke,userData:ve,signOut:function(){localStorage.removeItem("jwt"),Pe.push("/sign-in")}}),Object(a.jsxs)(g.d,{children:[Object(a.jsx)(_,{exact:!0,path:"/",component:X,loggedIn:Ke,cards:te,onEditProfile:function(e){return e.preventDefault(),void o(!0)},onEditAvatar:function(e){return function(e){e.preventDefault(),h(!0)}(e)},onAddPlace:function(e){return e.preventDefault(),void L(!0)},onCardClick:function(e){var t=e.src,n=e.nameImg;le({src:t,nameImg:n}),F(!0)},setConfirmOpen:function(){R(!0)},onCardLike:function(e,t){var n,a;e.some((function(e){return e===ve._id}))?function(e,t){return fetch(m+"cards/".concat(e,"/likes"),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then((function(e){return b(e)}))}(t,Ne).then((function(e){var t=te.map((function(t){return t.cardId===e._id?{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}:t}));ne(t)})).catch((function(e){console.log(e)})):(n=t,a=Ne,fetch(m+"cards/".concat(n,"/likes"),{method:"PUT",headers:{authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}).then((function(e){return b(e)}))).then((function(e){var t=te.map((function(t){return t.cardId===e._id?{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}:t}));ne(t)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){Xe("cardDelete"),Se({ownerId:e.ownerId,cardId:e.cardId})},isLoading:ce}),Object(a.jsx)(g.b,{path:"/sign-in",children:Object(a.jsx)(O,{onLogin:function(e,t){var n,a;(n=t,a=e,fetch("".concat(y,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:a})}).then((function(e){return k(e)})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e}))).then((function(t){t.token&&(Ze(!0),Ce({email:e}),ye(t.token),Pe.push("/"))})).catch((function(e){console.log(e)}))}})}),Object(a.jsx)(g.b,{path:"/sign-up",children:Object(a.jsx)(v,{onRegister:function(e,t){var n,a;(n=e,a=t,fetch("".concat(y,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:a})}).then((function(e){return k(e)}))).then((function(e){e._id&&(J(!0),Pe.push("/sign-in")),q(!0)})).catch((function(e){console.log(e),J(!1),q(!0)}))}})}),Object(a.jsx)(g.b,{path:"*",children:Object(a.jsx)(N,{})})]}),Object(a.jsx)(w,{}),Object(a.jsx)(T,{isOpen:n,onClose:Fe,onUpdateUser:function(e,t){ge(!0),function(e,t,n){return fetch(m+"users/me",{method:"PATCH",headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return b(e)}))}(e,t,Ne).then((function(e){return Ce(e)})).then((function(){ge(!1),o(!1)})).catch((function(e){console.log(e)}))},isLoadingPopup:he}),Object(a.jsx)(V,{isOpen:p,onClose:Fe,onUpdateAvatar:function(e){var t,n;ge(!0),(t=e.avatar,n=Ne,fetch(m+"users/me/avatar",{method:"PATCH",headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){return b(e)}))).then((function(e){return Ce(e)})).then((function(){ge(!1),h(!1)})).catch((function(e){console.log(e)}))},isLoadingPopup:he}),Object(a.jsx)(K,{isOpen:A,onClose:Fe,onAddPlace:function(e){var t,n,a;ge(!0),(t=e.name,n=e.link,a=Ne,fetch(m+"cards",{method:"POST",headers:{authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then((function(e){return b(e)}))).then((function(e){e.key=e._id,e.like=e.likes,e.ownerId=e.owner,e.src=e.link,e.nameImg=e.name,e.cardId=e._id,ne([e].concat(Object(r.a)(te)))})).then((function(){ge(!1),L(!1)})).catch((function(e){console.log(e)}))},isLoadingPopup:he}),Object(a.jsx)(d,{isOpen:Y,setIsOpen:R,confirmAction:We,"set\u0421urrentUser":Ce,isLoadingConfirm:me,setIsLoadingConfirm:je,cardDelete:function(){var e,t;Le.ownerId===ve._id&&(e=Le.cardId,t=Ne,fetch(m+"cards/".concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then((function(e){return b(e)}))).then((function(){var e=te.filter((function(e){return e.cardId!==Le.cardId}));ne(e)})).then((function(){R(!1),je(!1)})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(l,{card:ue,isOpen:Z,onClose:Fe}),Object(a.jsx)(I,{isOpen:M,onClose:Fe,isConfirmAuth:z})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(x.a,{children:Object(a.jsx)(Z,{})})}),document.getElementById("root")),F()}},[[35,1,2]]]);
//# sourceMappingURL=main.e72d8740.chunk.js.map