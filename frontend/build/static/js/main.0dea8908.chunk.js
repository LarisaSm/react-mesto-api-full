(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),c=n.n(o),i=n(18),s=n.n(i),r=(n(28),n(20)),u=n(2);var l=function(e){var t=e.card,n=e.isOpen,i=e.onClose,s=t.src,r=t.nameImg,u=Object(o.useCallback)((function(e){e.target===e.currentTarget&&i()}),[i]),l=Object(o.useCallback)((function(e){"Escape"===e.key&&i()}),[i]);return c.a.useEffect((function(){if(n){var e=document.querySelector(".image");e.classList.add("popup_opened"),document.body.addEventListener("keyup",l),e.addEventListener("click",u)}return function(){var e=document.querySelector(".image");e.classList.remove("popup_opened"),document.body.removeEventListener("keyup",l),e.removeEventListener("click",u)}}),[n,u,l]),Object(a.jsx)("div",{className:"popup image",children:Object(a.jsxs)("div",{className:"popup__container image__container",children:[Object(a.jsx)("img",{src:s,alt:r,className:"popup__image"}),Object(a.jsx)("p",{className:"popup__figcaption-image",children:r}),Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:i})]})})};n(29);var p=function(){return Object(a.jsx)("div",{className:"Spinner"})};var d=function(e){var t=e.isOpen,n=e.setIsOpen,o=e.confirmAction,c=e.isLoadingConfirm,i=e.setIsLoadingConfirm,s=e.cardDelete;return Object(a.jsx)("div",{className:"confirm popup ".concat(t&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container confirm__container",children:[Object(a.jsx)("h2",{className:"popup__header",children:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?"}),Object(a.jsx)("button",{className:"popup__save",type:"button",onClick:function(){switch(i(!0),o){case"cardDelete":s()}},children:"\u0414\u0430"}),c?Object(a.jsx)(p,{}):"",Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:function(e){e.preventDefault(),n(!1)}})]})})},m="https://api.15dev.students.nomoredomains.icu/";function j(e){return fetch(m+"cards",{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return f(e)}))}function f(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}var b=function(e){var t=e.button,n=e.title,o=e.formId,c=e.children,i=e.onSubmit;return Object(a.jsx)("div",{className:"auth",children:Object(a.jsxs)("form",{className:"form ".concat(o),name:"auth__form",onSubmit:i,noValidate:!0,children:[Object(a.jsx)("h2",{className:"auth__title",children:n}),c,Object(a.jsx)("button",{className:"auth__save",type:"submit",children:t})]})})},h=n(3);var g=Object(h.i)((function(e){var t=e.onLogin,n=c.a.useState(""),o=Object(u.a)(n,2),i=o[0],s=o[1],r=c.a.useState(""),l=Object(u.a)(r,2),p=l[0],d=l[1];return Object(a.jsxs)(b,{button:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0445\u043e\u0434",formId:"auth",onSubmit:function(e){return function(e){e.preventDefault(),t(i,p),s(""),d("")}(e)},children:[Object(a.jsx)("input",{id:"email-input",type:"email",className:"auth__input",autoComplete:"off",placeholder:"Email",name:"email",value:i,onChange:function(e){s(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"email-input-error",className:"auth__input-error"}),Object(a.jsx)("input",{id:"pass-input",type:"password",className:"auth__input",autoComplete:"new-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"pass",value:p,minLength:"2",maxLength:"200",required:!0,onChange:function(e){d(e.target.value)}}),Object(a.jsx)("span",{id:"pass-input-error",className:"auth__input-error"})]})})),O=n(7);var x=Object(h.i)((function(e){var t=e.onRegister,n=c.a.useState(""),o=Object(u.a)(n,2),i=o[0],s=o[1],r=c.a.useState(""),l=Object(u.a)(r,2),p=l[0],d=l[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(b,{button:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",formId:"auth",onSubmit:function(e){return function(e){e.preventDefault(),t(p,i)}(e)},children:[Object(a.jsx)("input",{id:"email-input",type:"email",className:"auth__input",autoComplete:"off",placeholder:"Email",name:"email",value:i,onChange:function(e){s(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"email-input-error",className:"auth__input-error"}),Object(a.jsx)("input",{id:"pass-input",type:"password",className:"auth__input",autoComplete:"new-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"pass",value:p,minLength:"2",maxLength:"200",required:!0,onChange:function(e){d(e.target.value)}}),Object(a.jsx)("span",{id:"pass-input-error",className:"auth-error"})]}),Object(a.jsxs)("p",{className:"auth__register-text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(a.jsx)(O.b,{className:"auth__register-link",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})),v=n(21),C=n(22),A=function(e){var t=e.component,n=Object(C.a)(e,["component"]);return Object(a.jsx)(h.b,{exact:!0,children:function(){return n.loggedIn?Object(a.jsx)(t,Object(v.a)({},n)):Object(a.jsx)(h.a,{to:"/sign-in"})}})};var _=function(){return Object(a.jsxs)("div",{className:"not-found",children:[Object(a.jsxs)("h3",{className:"not-found__title",children:[Object(a.jsx)("span",{children:"404"})," - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]}),Object(a.jsx)("img",{className:"not-found__image",alt:""}),Object(a.jsx)("p",{className:"not-found__text",children:"\u041e\u0439, \u0437\u0434\u0435\u0441\u044c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442"}),Object(a.jsx)(O.b,{className:"button button_type_to-main",to:"/",children:"\u041d\u0430\u0437\u0430\u0434"})]})},N="https://api.15dev.students.nomoredomains.icu";function y(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}var k=function(e){var t=e.isOpen,n=e.onClose,o=e.isConfirmAuth;return Object(a.jsx)("div",{className:"infoToolTip ".concat(t&&"infoToolTip_opened"),children:Object(a.jsxs)("div",{className:"infoToolTip__container",children:[Object(a.jsx)("img",{className:"infoToolTip__img",src:o?"data:image/png;base64,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":"data:image/png;base64,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",alt:""}),Object(a.jsx)("h2",{className:"infoToolTip__text",children:o?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}),Object(a.jsx)("button",{className:"infoToolTip__close",type:"button",onClick:function(e){e.preventDefault(),n()}})]})})},I=n.p+"static/media/header__logo.a307e1c4.svg";var L=function(e){var t=e.loggedIn,n=e.userData,o=e.signOut,c=Object(h.h)();return Object(a.jsxs)("header",{className:"header page__header",children:[Object(a.jsx)("img",{src:I,alt:"\u041c\u0435\u0441\u0442\u043e",className:"header__logo"}),function(e){switch(e){case"/sign-in":return Object(a.jsx)(O.b,{to:"sign-up",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"});case"/sign-up":return Object(a.jsx)(O.b,{to:"sign-in",className:"header__link",children:"\u0412\u043e\u0439\u0442\u0438"});case"/":return t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{className:"header__user",children:n.email}),Object(a.jsx)("button",{onClick:o,className:"header__link header__link_signout",children:"\u0412\u044b\u0439\u0442\u0438"})]});default:return}}(c.pathname)]})};var S=function(){return Object(a.jsx)("footer",{className:"footer page__footer",children:"\xa9 2020 Mesto Russia"})},w=c.a.createContext();var E=function(e){var t=e.cardId,n=e.src,o=e.nameImg,i=e.like,s=e.onCardClick,r=e.onCardLike,u=e.onCardDelete,l=e.ownerId,p=e.setConfirmOpen,d=c.a.useContext(w),m=l===d._id,j="element__trash ".concat(m?" ":"element__trash_invisible"),f=i.some((function(e){return e===d._id})),b="element__like ".concat(f?"element__like_type_active":" ");return Object(a.jsxs)("div",{className:"element",children:[Object(a.jsx)("img",{src:n,alt:o,className:"element__img",onClick:function(){s({src:n,nameImg:o})}}),Object(a.jsxs)("div",{className:"element__name",children:[Object(a.jsx)("h3",{className:"element__title",children:o}),Object(a.jsxs)("div",{className:"element__likes",children:[Object(a.jsx)("button",{className:b,type:"button",onClick:function(){r(i,t)}}),Object(a.jsx)("p",{className:"element__like-counter",children:i.length})]})]}),Object(a.jsx)("button",{className:j,type:"button",onClick:function(){p(!0),u({ownerId:l,cardId:t})}})]})};var W=function(e){var t=e.cards,n=e.onCardLike,o=e.onEditProfile,i=e.onAddPlace,s=e.onEditAvatar,r=e.onCardClick,u=e.setConfirmOpen,l=e.isLoading,d=e.onCardDelete,m=c.a.useContext(w);return Object(a.jsxs)("main",{className:"main page__main",children:[Object(a.jsxs)("section",{className:"profile main__profile",children:[Object(a.jsx)("a",{href:"/#",className:"profile__avatar-edit",onClick:s,children:Object(a.jsx)("img",{src:m.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar"})}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__name",children:[Object(a.jsx)("p",{className:"profile__name-title",children:m.name}),Object(a.jsx)("button",{className:"profile__button profile__button_type_edit",type:"button",onClick:o})]}),Object(a.jsx)("p",{className:"profile__about",children:m.about})]}),Object(a.jsx)("button",{className:"profile__button profile__button_type_add ",type:"button",onClick:i})]}),Object(a.jsx)("section",{className:"elements main__elements",children:l?Object(a.jsx)(p,{}):t.map((function(e){var t=e.cardId,o=e.src,c=e.nameImg,i=e.like,s=e.ownerId;return Object(a.jsx)(E,{ownerId:s,src:o,nameImg:c,like:i,cardId:t,onCardClick:r,onCardLike:n,onCardDelete:d,setConfirmOpen:u},t)}))})]})};var X=function(e){var t=e.formId,n=e.isOpen,i=e.title,s=e.children,r=e.onClose,u=e.button,l=e.onSubmit,d=e.isLoadingPopup,m=Object(o.useCallback)((function(e){e.target===e.currentTarget&&r()}),[r]),j=Object(o.useCallback)((function(e){"Escape"===e.key&&r()}),[r]);return c.a.useEffect((function(){if(n){var e=document.querySelector(".".concat(t));document.body.addEventListener("keyup",j),e.addEventListener("click",m)}return function(){var e=document.querySelector(".".concat(t));document.body.removeEventListener("keyup",j),e.removeEventListener("click",m)}}),[n,t,m,j]),Object(a.jsx)("div",{className:"popup ".concat(t," ").concat(n&&"popup_opened"),children:Object(a.jsxs)("form",{className:"form popup__container",name:t,onSubmit:l,noValidate:!0,children:[Object(a.jsx)("h2",{className:"popup__title",children:i}),s,Object(a.jsx)("button",{className:"popup__save",type:"submit",children:u}),Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:function(e){e.preventDefault(),r()}}),d?Object(a.jsx)(p,{}):""]})})};var P=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateUser,i=e.isLoadingPopup,s=c.a.useState(""),r=Object(u.a)(s,2),l=r[0],p=r[1],d=c.a.useState(""),m=Object(u.a)(d,2),j=m[0],f=m[1],b=c.a.useContext(w);return c.a.useEffect((function(){p(b.about),f(b.name)}),[b]),Object(a.jsxs)(X,{button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",formId:"edit-user",isOpen:t,onClose:n,onSubmit:function(e){return function(e){e.preventDefault(),o(j,l)}(e)},isLoadingPopup:i,children:[Object(a.jsx)("input",{id:"name-input",type:"text",className:"popup__input popup__input_type_name",autoComplete:"off",placeholder:"\u0418\u043c\u044f",name:"name",minLength:"2",maxLength:"40",value:j,onChange:function(e){f(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__input-error"}),Object(a.jsx)("input",{id:"about-input",type:"text",className:"popup__input popup__input_type_about",autoComplete:"off",placeholder:"\u041e \u0441\u0435\u0431\u0435",name:"about",value:l,minLength:"2",maxLength:"200",required:!0,onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{id:"about-input-error",className:"popup__input-error"})]})};var T=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,i=e.isLoadingPopup,s=c.a.useRef();return Object(a.jsxs)(X,{button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",formId:"edit-user-avatar",isOpen:t,onClose:n,onSubmit:function(e){return function(e){e.preventDefault(),o({avatar:s.current.value})}(e)},isLoadingPopup:i,children:[Object(a.jsx)("input",{id:"avatar-input",type:"url",className:"popup__input popup__input_type_name",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",name:"name",ref:s,minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("span",{id:"avatar-input-error",className:"popup__input-error"})]})};var V=function(e){var t=e.isOpen,n=e.onClose,o=e.onAddPlace,i=e.isLoadingPopup,s=c.a.useState(""),r=Object(u.a)(s,2),l=r[0],p=r[1],d=c.a.useState(""),m=Object(u.a)(d,2),j=m[0],f=m[1];return Object(a.jsxs)(X,{button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",formId:"add-card",isOpen:t,onClose:n,onSubmit:function(e){return function(e){e.preventDefault(),o({name:l,link:j})}(e)},isLoadingPopup:i,children:[Object(a.jsx)("input",{id:"name-input",type:"text",className:"popup__input popup__input_type_name",autoComplete:"off",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",value:l,onChange:function(e){p(e.target.value)},minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__input-error"}),Object(a.jsx)("input",{id:"url-input",type:"url",className:"popup__input popup__input_type_about",autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:j,onChange:function(e){f(e.target.value)},name:"link",required:!0}),Object(a.jsx)("span",{id:"url-input-error",className:"popup__input-error"})]})};var K=function(){var e=c.a.useState(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],i=c.a.useState(!1),s=Object(u.a)(i,2),p=s[0],b=s[1],O=c.a.useState(!1),v=Object(u.a)(O,2),C=v[0],I=v[1],E=c.a.useState(!1),X=Object(u.a)(E,2),K=X[0],Z=X[1],F=c.a.useState(!1),D=Object(u.a)(F,2),B=D[0],Y=D[1],R=c.a.useState(!1),Q=Object(u.a)(R,2),H=Q[0],M=Q[1],q=c.a.useState(!1),U=Object(u.a)(q,2),G=U[0],z=U[1],J=c.a.useState([]),$=Object(u.a)(J,2),ee=$[0],te=$[1],ne=c.a.useState(!1),ae=Object(u.a)(ne,2),oe=ae[0],ce=ae[1],ie=c.a.useState({src:"",nameImg:""}),se=Object(u.a)(ie,2),re=se[0],ue=se[1],le=c.a.useState(!1),pe=Object(u.a)(le,2),de=pe[0],me=pe[1],je=c.a.useState(!1),fe=Object(u.a)(je,2),be=fe[0],he=fe[1],ge=c.a.useState({name:"",about:"",email:"",token:""}),Oe=Object(u.a)(ge,2),xe=Oe[0],ve=Oe[1],Ce=c.a.useState(),Ae=Object(u.a)(Ce,2),_e=Ae[0],Ne=Ae[1],ye=c.a.useState({ownerId:"",cardId:""}),ke=Object(u.a)(ye,2),Ie=ke[0],Le=ke[1],Se=c.a.useState({}),we=Object(u.a)(Se,2),Ee=we[0],We=we[1],Xe=Object(h.g)(),Pe=c.a.useState(!1),Te=Object(u.a)(Pe,2),Ve=Te[0],Ke=Te[1];function Ze(){o(!1),b(!1),I(!1),Z(!1),M(!1),ue([]),he(!1),Le({ownerId:"",cardId:""})}function Fe(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(N,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"".concat(e)}}).then((function(e){return y(e)})).then((function(e){return e}))).then((function(e){console.log(e),e&&(Ke(!0),ve({email:e.email}),Ne(t),Xe.push("/"))})).catch((function(e){console.log(e)}))}return c.a.useEffect((function(){var e;(e=_e,fetch(m+"users/me",{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then((function(e){return f(e)}))).then((function(e){ve(e)})).catch((function(e){console.log(e)}))}),[_e]),c.a.useEffect((function(){j(_e).then((function(e){te(e.map((function(e){return{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}}))),ce(!1)})).catch((function(e){console.log(e)}))}),[_e]),c.a.useEffect((function(){ce(!0),Fe(),j(_e).then((function(e){te(e.map((function(e){return{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}}))),ce(!1)})).catch((function(e){console.log(e)}))}),[]),Object(a.jsx)(w.Provider,{value:xe,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(L,{loggedIn:Ve,userData:xe,signOut:function(){localStorage.removeItem("jwt"),Xe.push("/sign-in")}}),Object(a.jsxs)(h.d,{children:[Object(a.jsx)(A,{exact:!0,path:"/",component:W,loggedIn:Ve,cards:ee,onEditProfile:function(e){return e.preventDefault(),void o(!0)},onEditAvatar:function(e){return function(e){e.preventDefault(),b(!0)}(e)},onAddPlace:function(e){return e.preventDefault(),void I(!0)},onCardClick:function(e){var t=e.src,n=e.nameImg;ue({src:t,nameImg:n}),Z(!0)},setConfirmOpen:function(){Y(!0)},onCardLike:function(e,t){var n,a;e.some((function(e){return e===xe._id}))?function(e,t){return fetch(m+"cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then((function(e){return f(e)}))}(t,_e).then((function(e){var t=ee.map((function(t){return t.cardId===e._id?{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}:t}));te(t)})).catch((function(e){console.log(e)})):(n=t,a=_e,fetch(m+"cards/likes/".concat(n),{method:"PUT",headers:{authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}).then((function(e){return f(e)}))).then((function(e){var t=ee.map((function(t){return t.cardId===e._id?{src:e.link,nameImg:e.name,like:e.likes,cardId:e._id,ownerId:e.owner}:t}));te(t)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){We("cardDelete"),Le({ownerId:e.ownerId,cardId:e.cardId})},isLoading:oe}),Object(a.jsx)(h.b,{path:"/sign-in",children:Object(a.jsx)(g,{onLogin:function(e,t){var n,a;(n=t,a=e,fetch("".concat(N,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:a})}).then((function(e){return y(e)})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e}))).then((function(t){t.token&&(Ke(!0),ve({email:e}),Ne(t.token),Xe.push("/"))})).catch((function(e){console.log(e)}))}})}),Object(a.jsx)(h.b,{path:"/sign-up",children:Object(a.jsx)(x,{onRegister:function(e,t){var n,a;(n=e,a=t,fetch("".concat(N,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,email:a})}).then((function(e){return y(e)}))).then((function(e){e._id&&(z(!0),Xe.push("/sign-in")),M(!0)})).catch((function(e){console.log(e),z(!1),M(!0)}))}})}),Object(a.jsx)(h.b,{path:"*",children:Object(a.jsx)(_,{})})]}),Object(a.jsx)(S,{}),Object(a.jsx)(P,{isOpen:n,onClose:Ze,onUpdateUser:function(e,t){he(!0),function(e,t,n){return fetch(m+"users/me",{method:"PATCH",headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return f(e)}))}(e,t,_e).then((function(e){return ve(e)})).then((function(){he(!1),o(!1)})).catch((function(e){console.log(e)}))},isLoadingPopup:be}),Object(a.jsx)(T,{isOpen:p,onClose:Ze,onUpdateAvatar:function(e){var t,n;he(!0),(t=e.avatar,n=_e,fetch(m+"users/me/avatar",{method:"PATCH",headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(e){return f(e)}))).then((function(e){return ve(e)})).then((function(){he(!1),b(!1)})).catch((function(e){console.log(e)}))},isLoadingPopup:be}),Object(a.jsx)(V,{isOpen:C,onClose:Ze,onAddPlace:function(e){var t,n,a;he(!0),(t=e.name,n=e.link,a=_e,fetch(m+"cards",{method:"POST",headers:{authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then((function(e){return f(e)}))).then((function(e){e.key=e._id,e.like=e.likes,e.ownerId=e.owner,e.src=e.link,e.nameImg=e.name,e.cardId=e._id,te([e].concat(Object(r.a)(ee)))})).then((function(){he(!1),I(!1)})).catch((function(e){console.log(e)}))},isLoadingPopup:be}),Object(a.jsx)(d,{isOpen:B,setIsOpen:Y,confirmAction:Ee,"set\u0421urrentUser":ve,isLoadingConfirm:de,setIsLoadingConfirm:me,cardDelete:function(){var e,t;Ie.ownerId===xe._id&&(e=Ie.cardId,t=_e,fetch(m+"cards/".concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then((function(e){return f(e)}))).then((function(){var e=ee.filter((function(e){return e.cardId!==Ie.cardId}));te(e)})).then((function(){Y(!1),me(!1)})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(l,{card:re,isOpen:K,onClose:Ze}),Object(a.jsx)(k,{isOpen:H,onClose:Ze,isConfirmAuth:G})]})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(O.a,{children:Object(a.jsx)(K,{})})}),document.getElementById("root")),Z()}},[[35,1,2]]]);
//# sourceMappingURL=main.0dea8908.chunk.js.map